### 동작 개요
각 상황에 따른 보행 드로이드의 행동 패턴은 아래와 같습니다.

|                    상황                     |         행동         |
|:-------------------------------------------:|:--------------------:|
|               처음 실행할 때                |   기본자세로 정지    |
|             장애물이 없는 경우              |     앞으로 걷기      |
|            장애물을 발견한 경우             |  정지 후 뒤로 걷기   |
|               뒤로 걸어간 후                | 왼쪽으로 방향 바꾸기 |
| 왼쪽으로 방향을 바꾸어도 장애물이 감지될 때 | 왼쪽으로 방향 바꾸기 |

### 모션 실행 방법
RoboPlus Motion 에서 작성한 모션을 CM-5 에 저장한 후 이 모션을 사용하기 위해서는 태스크 코드에서 CM-5 의 모션을 실행하도록 해야 합니다. 아래 두 개의 파라미터를 이용하여 로봇의 모션을 실행시킬 수 있습니다.

![](/assets/images/edu/bioloid/walkingdroid_01_kr.png)

모션을 실행하기 위해서는 로드 명령어를 사용해야 합니다. 로드 명령어를 선택하면 두 개의 파라미터가 생성됩니다. 좌측의 파라미터에는 제어기 -> 모션 의 모션 페이지를 선택하고, 우측 파라미터에는 원하는 모션이 들어 있는 모션 페이지 번호를 입력합니다.   
아래와 같이 태스크 코드를 작성하여 CM-5 에 다운로드 하고 실행시키면 5번 페이지에 저장된 모션이 실행됩니다.

![](/assets/images/edu/bioloid/wd_async_motion_kr.png)

#### 비 동기식 모션 실행  
로봇의 모션 상태를 확인하지 않고, 다음 작업을 시키는 모션 제어 방식입니다. 코드를 이해하는 것이 매우 직관적이어서 초보자들에게 적합합니다. 하지만, 모션 실행 중에 중복 실행을 시킬 위험이 있어서 원하는 대로 조종이 잘 되지 않을 수 있습니다.

#### 동기식 모션 실행  
로봇의 모션 상태를 확인하여 실행이 완료된 후에 다음 작업을 시키는 모션 제어 방식입니다. 멀티 태스크(Multi-Task)에 대한 개념이 필요하기 때문에 중급자 이상에게 적합합니다. 무한 반복 모션의 경우 모션 상태 확인시 계속 기다릴 수 있으므로 태스크 코드를 잘 작성해야 합니다.

![](/assets/images/edu/bioloid/motion_status_kr.png)

#### 무한 반복 모션  
보행과 같이 규칙적으로 반복되는 모션은 무한 반복 모션으로 만드는 것이 효과적입니다.

### 태스크 코드 작성

![](/assets/images/edu/bioloid/wd_task_01_kr.png)

1. 처음 실행될 때 준비자세를 호출합니다.
2. 장애물이 없는 경우 전진하기를 호출합니다.
3. 만약 중앙 거리센서에 물체가 감지되는 경우 정지 후 뒤로 걸어가서, 좌회전합니다.
4. 만약 좌회전 해도 중앙 거리센서에 물체가 감지되는 경우 감지되지 않을 때까지 좌회전합니다.
    ![](/assets/images/edu/bioloid/wd_task_02_kr.png)
5. 준비 자세 모션이 저장된 1 번 페이지의 모션을 실행하는 함수를 작성합니다. 모션을 실행시킨 후 모션이 완료될 때까지 기다리기 위해 모션대기용_함수를 호출합니다.
6. 전진 모션이 저장된 12번 페이지의 모션을 실행하는 함수를 작성합니다. 모션을 실행시킨 후 모션이 완료될 때까지 기다리기 위해 모션대기용_함수를 호출합니다.
7. 후진 모션이 저장된 13번 페이지의 모션을 실행하는 함수를 작성합니다. 모션을 실행시킨 후 모션이 완료될 때까지 기다리기 위해 모션대기용_함수를 호출합니다.
8. 좌회전 모션이 저장된 15번 페이지의 모션을 실행하는 함수를 작성합니다. 모션을 실행시킨 후 모션이 완료될 때까지 기다리기 위해 모션대기용_함수를 호출합니다.
9. 모션 상태 파라미터 값을 체크하여 모션이 동작중인 동안에는 대기하는 함수를 작성합니다.

### 다운로드

- 완성된 태스크 코드 : [download][BIO_CMP_WalkingDroid_KR.tsk]
- 다운로드 방법 : [태스크 코드 다운로드](/docs/kr/edu/bioloid/beginner/#태스크-코드-다운로드)

### 동작 확인
다운로드한 태스크 코드를 PLAY 시킵니다. 보행 경로 상에 장애물을 설치해 놓고 보행 드로이드가 장애물을 피해서 보행하는 것을 확인합니다.

  ![](/assets/images/edu/bioloid/wd_result_kr.png)

[BIO_CMP_WalkingDroid_KR.tsk]: http://www.robotis.com/service/download.php?no=1246
